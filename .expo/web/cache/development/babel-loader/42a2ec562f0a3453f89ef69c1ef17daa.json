{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React from 'react';\nimport { useState, useEffect } from 'react';\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport UserModel from \"../model/UserModel\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar ListItem = function ListItem(_ref) {\n  var message = _ref.message,\n    sender = _ref.sender,\n    avatarUrl = _ref.avatarUrl,\n    onRowSelected = _ref.onRowSelected;\n  var onClick = function onClick() {\n    console.log('int he row: row was selected ' + sender);\n    console.log('int he row: avatrUrl ' + avatarUrl);\n    onRowSelected(sender);\n  };\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    userPic = _useState2[0],\n    setPic = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    userName = _useState4[0],\n    setName = _useState4[1];\n  var getUserDetails = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        console.log(\"sender : \" + sender);\n        var user = yield UserModel.getUserById(sender);\n        console.log(\"getting user by ID \" + user);\n        setName(user[0]);\n        setPic(user[1]);\n      } catch (err) {\n        console.log(\"fail getting user by ID \" + err);\n      }\n    });\n    return function getUserDetails() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    getUserDetails();\n  });\n  return _jsx(TouchableHighlight, {\n    onPress: onClick,\n    underlayColor: 'gainsboro',\n    children: _jsxs(View, {\n      style: styles.listRow,\n      children: [avatarUrl == \"\" && _jsx(Image, {\n        style: styles.listRowImage,\n        source: require(\"../assets/avatar-icon-images-4.jpg\")\n      }), avatarUrl != \"\" && _jsx(Image, {\n        style: styles.listRowImage,\n        source: {\n          uri: avatarUrl.toString()\n        }\n      }), _jsxs(View, {\n        style: styles.listRowTextContainer,\n        children: [_jsx(Text, {\n          style: styles.listRowName,\n          children: message\n        }), _jsxs(View, {\n          style: styles.userDetailsRow,\n          children: [_jsx(Image, {\n            style: styles.profilePicture,\n            source: {\n              uri: userPic\n            }\n          }), _jsx(Text, {\n            style: styles.listRowId,\n            children: userName\n          })]\n        })]\n      })]\n    })\n  });\n};\nvar AllPostsPage = function AllPostsPage(_ref3) {\n  var route = _ref3.route,\n    navigation = _ref3.navigation;\n  var onRowSelected = function onRowSelected(sender) {\n    console.log(\"in the list: row was selected \" + sender);\n  };\n  var _useState5 = useState(),\n    _useState6 = _slicedToArray(_useState5, 2),\n    posts = _useState6[0],\n    setPosts = _useState6[1];\n  useEffect(function () {\n    var unsubscribe = navigation.addListener('focus', _asyncToGenerator(function* () {\n      console.log('focus');\n      var posts = [];\n      try {\n        posts = yield UserModel.getAllPosts();\n        console.log(\"fetching posts complete\");\n      } catch (err) {\n        console.log(\"fail fetching posts \" + err);\n      }\n      console.log(\"fetching finish\");\n      setPosts(posts);\n    }));\n    return unsubscribe;\n  });\n  return _jsx(FlatList, {\n    style: styles.flatlist,\n    data: posts,\n    keyExtractor: function keyExtractor(post) {\n      return post.sender.toString();\n    },\n    renderItem: function renderItem(_ref5) {\n      var item = _ref5.item;\n      return _jsx(ListItem, {\n        message: item.message,\n        sender: item.sender,\n        avatarUrl: item.avatarUrl,\n        onRowSelected: onRowSelected\n      });\n    }\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    marginTop: StatusBar.currentHeight,\n    flex: 1,\n    backgroundColor: 'grey'\n  },\n  flatlist: {\n    flex: 1\n  },\n  listRow: {\n    margin: 4,\n    flexDirection: \"row\",\n    height: 150,\n    elevation: 1,\n    borderRadius: 2\n  },\n  userDetailsRow: {\n    flexDirection: \"row\",\n    height: 40,\n    alignItems: 'flex-start'\n  },\n  listRowImage: {\n    margin: 10,\n    resizeMode: \"contain\",\n    height: 130,\n    width: 130\n  },\n  listRowTextContainer: {\n    flex: 1,\n    margin: 10,\n    justifyContent: \"space-around\"\n  },\n  listRowName: {\n    fontSize: 30\n  },\n  listRowId: {\n    fontSize: 25\n  },\n  profilePicture: {\n    width: 35,\n    height: 35,\n    borderRadius: 75,\n    marginEnd: 20\n  }\n});\nexport default AllPostsPage;","map":{"version":3,"names":["React","useState","useEffect","StatusBar","StyleSheet","Text","View","Image","FlatList","TouchableHighlight","UserModel","jsx","_jsx","jsxs","_jsxs","ListItem","_ref","message","sender","avatarUrl","onRowSelected","onClick","console","log","_useState","_useState2","_slicedToArray","userPic","setPic","_useState3","_useState4","userName","setName","getUserDetails","_ref2","_asyncToGenerator","user","getUserById","err","apply","arguments","onPress","underlayColor","children","style","styles","listRow","listRowImage","source","require","uri","toString","listRowTextContainer","listRowName","userDetailsRow","profilePicture","listRowId","AllPostsPage","_ref3","route","navigation","_useState5","_useState6","posts","setPosts","unsubscribe","addListener","getAllPosts","flatlist","data","keyExtractor","post","renderItem","_ref5","item","create","container","marginTop","currentHeight","flex","backgroundColor","margin","flexDirection","height","elevation","borderRadius","alignItems","resizeMode","width","justifyContent","fontSize","marginEnd"],"sources":["C:/Users/michael harush/Desktop/Front/components/AllPostsPage.tsx"],"sourcesContent":["import React from 'react';\r\nimport { FC, useState, useEffect } from 'react';\r\nimport { StatusBar, StyleSheet, Text, View, Image, TouchableOpacity, Button, Alert, TextInput, FlatList, TouchableHighlight } from 'react-native';\r\nimport UserModel, { Post } from '../model/UserModel';\r\n\r\n\r\nconst ListItem: FC<{ message: String, sender: String, avatarUrl: String, onRowSelected: (sender: String) => void }> =\r\n    ({ message, sender, avatarUrl, onRowSelected }) => {\r\n        const onClick = () => {\r\n            console.log('int he row: row was selected ' + sender)\r\n            console.log('int he row: avatrUrl ' + avatarUrl)\r\n            onRowSelected(sender)\r\n        }\r\n\r\n        const [userPic, setPic] = useState<String>(\"\");\r\n        const [userName, setName] = useState<String>(\"\");\r\n\r\n        const getUserDetails = async ()=>{\r\n            try{\r\n                console.log(\"sender : \"+sender)\r\n                const user = await UserModel.getUserById(sender)\r\n                console.log(\"getting user by ID \" + user)\r\n                setName(user[0])\r\n                setPic(user[1])\r\n            }catch(err){\r\n                console.log(\"fail getting user by ID \" + err)\r\n            }\r\n        }\r\n\r\n        useEffect(()=>{\r\n            getUserDetails()\r\n        })\r\n\r\n        return (\r\n            <TouchableHighlight onPress={onClick} underlayColor={'gainsboro'}>\r\n                <View style={styles.listRow}>\r\n                    {avatarUrl == \"\" && <Image style={styles.listRowImage} source={require('../assets/avatar-icon-images-4.jpg')} />}\r\n                    {avatarUrl != \"\" && <Image style={styles.listRowImage} source={{ uri: avatarUrl.toString() }} />}\r\n\r\n                    <View style={styles.listRowTextContainer}>\r\n                        <Text style={styles.listRowName}>{message}</Text>\r\n                        <View style={styles.userDetailsRow}>\r\n                        <Image style={styles.profilePicture} source={{ uri: userPic }}/>\r\n                        <Text style={styles.listRowId}>{userName}</Text> \r\n                        </View>\r\n                    </View>\r\n                </View>\r\n            </TouchableHighlight>\r\n        )\r\n    }\r\n\r\n\r\nconst AllPostsPage: FC<{ route: any, navigation: any }> = ({ route, navigation }) => {\r\n    const onRowSelected = (sender: String) => {\r\n        console.log(\"in the list: row was selected \" + sender)\r\n    }\r\n\r\n    const [posts, setPosts] = useState<Array<Post>>();\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = navigation.addListener('focus', async () => {\r\n            console.log('focus')\r\n            let posts: Post[] = []\r\n            try {\r\n              posts = await UserModel.getAllPosts()\r\n                console.log(\"fetching posts complete\")\r\n            } catch (err) {\r\n                console.log(\"fail fetching posts \" + err)\r\n            }\r\n            console.log(\"fetching finish\")\r\n            setPosts(posts)\r\n        })\r\n        return unsubscribe\r\n    })\r\n\r\n\r\n    return (\r\n        <FlatList style={styles.flatlist}\r\n            data={posts}\r\n            keyExtractor={post => post.sender.toString()}\r\n            renderItem={({ item }) => (\r\n                <ListItem message={item.message} sender={item.sender} avatarUrl={item.avatarUrl} onRowSelected={onRowSelected} />\r\n            )}\r\n        >\r\n        </FlatList>\r\n    );\r\n};\r\n\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        marginTop: StatusBar.currentHeight,\r\n        flex: 1,\r\n        backgroundColor: 'grey',\r\n    },\r\n    flatlist: {\r\n        flex: 1,\r\n    },\r\n    listRow: {\r\n        margin: 4,\r\n        flexDirection: \"row\",\r\n        height: 150,\r\n        elevation: 1,\r\n        borderRadius: 2,\r\n    },\r\n    userDetailsRow: {\r\n        flexDirection: \"row\",\r\n        height: 40,\r\n        alignItems:'flex-start'\r\n    },\r\n    listRowImage: {\r\n        margin: 10,\r\n        resizeMode: \"contain\",\r\n        height: 130,\r\n        width: 130,\r\n    },\r\n    listRowTextContainer: {\r\n        flex: 1,\r\n        margin: 10,\r\n        justifyContent: \"space-around\"\r\n    },\r\n    listRowName: {\r\n        fontSize: 30\r\n    },\r\n    listRowId: {\r\n        fontSize: 25\r\n    },\r\n    profilePicture: {\r\n        width: 35,\r\n        height: 35,\r\n        borderRadius: 75,\r\n        marginEnd: 20\r\n      },\r\n});\r\n\r\nexport default AllPostsPage"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAAaC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAAC,OAAAC,SAAA;AAAA,OAAAC,UAAA;AAAA,OAAAC,IAAA;AAAA,OAAAC,IAAA;AAAA,OAAAC,KAAA;AAAA,OAAAC,QAAA;AAAA,OAAAC,kBAAA;AAEhD,OAAOC,SAAS;AAAqC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAGrD,IAAMC,QAA6G,GAC/G,SADEA,QAA6GA,CAAAC,IAAA,EAC5D;EAAA,IAAhDC,OAAO,GAAAD,IAAA,CAAPC,OAAO;IAAEC,MAAM,GAAAF,IAAA,CAANE,MAAM;IAAEC,SAAS,GAAAH,IAAA,CAATG,SAAS;IAAEC,aAAa,GAAAJ,IAAA,CAAbI,aAAa;EACxC,IAAMC,OAAO,GAAG,SAAVA,OAAOA,CAAA,EAAS;IAClBC,OAAO,CAACC,GAAG,CAAC,+BAA+B,GAAGL,MAAM,CAAC;IACrDI,OAAO,CAACC,GAAG,CAAC,uBAAuB,GAAGJ,SAAS,CAAC;IAChDC,aAAa,CAACF,MAAM,CAAC;EACzB,CAAC;EAED,IAAAM,SAAA,GAA0BvB,QAAQ,CAAS,EAAE,CAAC;IAAAwB,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAvCG,OAAO,GAAAF,UAAA;IAAEG,MAAM,GAAAH,UAAA;EACtB,IAAAI,UAAA,GAA4B5B,QAAQ,CAAS,EAAE,CAAC;IAAA6B,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAAzCE,QAAQ,GAAAD,UAAA;IAAEE,OAAO,GAAAF,UAAA;EAExB,IAAMG,cAAc;IAAA,IAAAC,KAAA,GAAAC,iBAAA,CAAG,aAAU;MAC7B,IAAG;QACCb,OAAO,CAACC,GAAG,CAAC,WAAW,GAACL,MAAM,CAAC;QAC/B,IAAMkB,IAAI,SAAS1B,SAAS,CAAC2B,WAAW,CAACnB,MAAM,CAAC;QAChDI,OAAO,CAACC,GAAG,CAAC,qBAAqB,GAAGa,IAAI,CAAC;QACzCJ,OAAO,CAACI,IAAI,CAAC,CAAC,CAAC,CAAC;QAChBR,MAAM,CAACQ,IAAI,CAAC,CAAC,CAAC,CAAC;MACnB,CAAC,QAAME,GAAG,EAAC;QACPhB,OAAO,CAACC,GAAG,CAAC,0BAA0B,GAAGe,GAAG,CAAC;MACjD;IACJ,CAAC;IAAA,gBAVKL,cAAcA,CAAA;MAAA,OAAAC,KAAA,CAAAK,KAAA,OAAAC,SAAA;IAAA;EAAA,GAUnB;EAEDtC,SAAS,CAAC,YAAI;IACV+B,cAAc,EAAE;EACpB,CAAC,CAAC;EAEF,OACIrB,IAAA,CAACH,kBAAkB;IAACgC,OAAO,EAAEpB,OAAQ;IAACqB,aAAa,EAAE,WAAY;IAAAC,QAAA,EAC7D7B,KAAA,CAACR,IAAI;MAACsC,KAAK,EAAEC,MAAM,CAACC,OAAQ;MAAAH,QAAA,GACvBxB,SAAS,IAAI,EAAE,IAAIP,IAAA,CAACL,KAAK;QAACqC,KAAK,EAAEC,MAAM,CAACE,YAAa;QAACC,MAAM,EAAEC,OAAO;MAAuC,EAAG,EAC/G9B,SAAS,IAAI,EAAE,IAAIP,IAAA,CAACL,KAAK;QAACqC,KAAK,EAAEC,MAAM,CAACE,YAAa;QAACC,MAAM,EAAE;UAAEE,GAAG,EAAE/B,SAAS,CAACgC,QAAQ;QAAG;MAAE,EAAG,EAEhGrC,KAAA,CAACR,IAAI;QAACsC,KAAK,EAAEC,MAAM,CAACO,oBAAqB;QAAAT,QAAA,GACrC/B,IAAA,CAACP,IAAI;UAACuC,KAAK,EAAEC,MAAM,CAACQ,WAAY;UAAAV,QAAA,EAAE1B;QAAO,EAAQ,EACjDH,KAAA,CAACR,IAAI;UAACsC,KAAK,EAAEC,MAAM,CAACS,cAAe;UAAAX,QAAA,GACnC/B,IAAA,CAACL,KAAK;YAACqC,KAAK,EAAEC,MAAM,CAACU,cAAe;YAACP,MAAM,EAAE;cAAEE,GAAG,EAAEvB;YAAQ;UAAE,EAAE,EAChEf,IAAA,CAACP,IAAI;YAACuC,KAAK,EAAEC,MAAM,CAACW,SAAU;YAAAb,QAAA,EAAEZ;UAAQ,EAAQ;QAAA,EACzC;MAAA,EACJ;IAAA;EACJ,EACU;AAE7B,CAAC;AAGL,IAAM0B,YAAiD,GAAG,SAApDA,YAAiDA,CAAAC,KAAA,EAA8B;EAAA,IAAxBC,KAAK,GAAAD,KAAA,CAALC,KAAK;IAAEC,UAAU,GAAAF,KAAA,CAAVE,UAAU;EAC1E,IAAMxC,aAAa,GAAG,SAAhBA,aAAaA,CAAIF,MAAc,EAAK;IACtCI,OAAO,CAACC,GAAG,CAAC,gCAAgC,GAAGL,MAAM,CAAC;EAC1D,CAAC;EAED,IAAA2C,UAAA,GAA0B5D,QAAQ,EAAe;IAAA6D,UAAA,GAAApC,cAAA,CAAAmC,UAAA;IAA1CE,KAAK,GAAAD,UAAA;IAAEE,QAAQ,GAAAF,UAAA;EAEtB5D,SAAS,CAAC,YAAM;IACZ,IAAM+D,WAAW,GAAGL,UAAU,CAACM,WAAW,CAAC,OAAO,EAAA/B,iBAAA,CAAE,aAAY;MAC5Db,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC;MACpB,IAAIwC,KAAa,GAAG,EAAE;MACtB,IAAI;QACFA,KAAK,SAASrD,SAAS,CAACyD,WAAW,EAAE;QACnC7C,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;MAC1C,CAAC,CAAC,OAAOe,GAAG,EAAE;QACVhB,OAAO,CAACC,GAAG,CAAC,sBAAsB,GAAGe,GAAG,CAAC;MAC7C;MACAhB,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC;MAC9ByC,QAAQ,CAACD,KAAK,CAAC;IACnB,CAAC,EAAC;IACF,OAAOE,WAAW;EACtB,CAAC,CAAC;EAGF,OACIrD,IAAA,CAACJ,QAAQ;IAACoC,KAAK,EAAEC,MAAM,CAACuB,QAAS;IAC7BC,IAAI,EAAEN,KAAM;IACZO,YAAY,EAAE,SAAAA,aAAAC,IAAI;MAAA,OAAIA,IAAI,CAACrD,MAAM,CAACiC,QAAQ,EAAE;IAAA,CAAC;IAC7CqB,UAAU,EAAE,SAAAA,WAAAC,KAAA;MAAA,IAAGC,IAAI,GAAAD,KAAA,CAAJC,IAAI;MAAA,OACf9D,IAAA,CAACG,QAAQ;QAACE,OAAO,EAAEyD,IAAI,CAACzD,OAAQ;QAACC,MAAM,EAAEwD,IAAI,CAACxD,MAAO;QAACC,SAAS,EAAEuD,IAAI,CAACvD,SAAU;QAACC,aAAa,EAAEA;MAAc,EAAG;IAAA;EACnH,EAEK;AAEnB,CAAC;AAGD,IAAMyB,MAAM,GAAGzC,UAAU,CAACuE,MAAM,CAAC;EAC7BC,SAAS,EAAE;IACPC,SAAS,EAAE1E,SAAS,CAAC2E,aAAa;IAClCC,IAAI,EAAE,CAAC;IACPC,eAAe,EAAE;EACrB,CAAC;EACDZ,QAAQ,EAAE;IACNW,IAAI,EAAE;EACV,CAAC;EACDjC,OAAO,EAAE;IACLmC,MAAM,EAAE,CAAC;IACTC,aAAa,EAAE,KAAK;IACpBC,MAAM,EAAE,GAAG;IACXC,SAAS,EAAE,CAAC;IACZC,YAAY,EAAE;EAClB,CAAC;EACD/B,cAAc,EAAE;IACZ4B,aAAa,EAAE,KAAK;IACpBC,MAAM,EAAE,EAAE;IACVG,UAAU,EAAC;EACf,CAAC;EACDvC,YAAY,EAAE;IACVkC,MAAM,EAAE,EAAE;IACVM,UAAU,EAAE,SAAS;IACrBJ,MAAM,EAAE,GAAG;IACXK,KAAK,EAAE;EACX,CAAC;EACDpC,oBAAoB,EAAE;IAClB2B,IAAI,EAAE,CAAC;IACPE,MAAM,EAAE,EAAE;IACVQ,cAAc,EAAE;EACpB,CAAC;EACDpC,WAAW,EAAE;IACTqC,QAAQ,EAAE;EACd,CAAC;EACDlC,SAAS,EAAE;IACPkC,QAAQ,EAAE;EACd,CAAC;EACDnC,cAAc,EAAE;IACZiC,KAAK,EAAE,EAAE;IACTL,MAAM,EAAE,EAAE;IACVE,YAAY,EAAE,EAAE;IAChBM,SAAS,EAAE;EACb;AACN,CAAC,CAAC;AAEF,eAAelC,YAAY"},"metadata":{},"sourceType":"module"}